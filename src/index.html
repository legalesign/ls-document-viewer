<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Legalesign Editor Tester</title>

    <script type="module" src="/build/ls-document-viewer.esm.js"></script>

    <script nomodule src="/build/ls-document-viewer.js"></script>
  </head>
  <body style="padding: 0px; margin: 0px">
    <ls-document-viewer id="my-editor" showrightpanel showtoolbox>
      <ls-field-properties id="my-field-panel" />
    </ls-document-viewer>
    <script>
      const componentInstance = document.currentScript.previousElementSibling;
      const editor = document.querySelector('ls-document-viewer');
      const properties = document.querySelector('ls-field-properties');
      editor.template = {
        id: 'dHBsMTRlOGE4NDEtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzIx',
        title: 'File Test (Alex)',
        fileName: '14e8a841-371b-11f0-9932-06976efe4321',
        pageDimensions: '"[[595, 842]]"',
        pageCount: 1,
        modified: '2025-05-22T14:43:37.000Z',
        link: 'https://dev-lon-templatepdf.s3-accelerate.amazonaws.com/14e8a841-371b-11f0-9932-06976efe4321?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIARUUP26UMRCYOXJRP%2F20250617%2Feu-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250617T132814Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEI7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCWV1LXdlc3QtMiJIMEYCIQCYHn9B05dXppYPCD4X8sW%2FKZmLvdxCpn9mbYclQSS4LwIhANa%2FtTUt%2BYCdflcnb%2BPI92g9lelojRzfRA9OQ9DdVjIsKtMDCHcQAhoMMTEzMDQ0NTUwOTM3IgzBrZc5oh3%2B1XxP0lYqsAOigJBgfPfkuZu7L6RMORicYAbGGc0l9uo2U%2FdROpeqx0Uiu5pTrRrSqPcpGGMtS5zDYsUHvlQryeA%2FYP48TT6Yh1HECgDgbCkaIx77RcXs8f%2BgcCqWmwcUBNBllejN8BDtRkJGpSyf%2BW1s21knEFawnQPB0MB%2B0JVLOtEPn8GCy8jrskfZ4epx6GDbb4Ih8bmgqMD9dP63KzFItl%2BN6wHfljUAK%2B0UeH0UCWatJ3ZpDXrd9YDXmNKwaoR6lbMPIvXdQywGlQ3CJguCKSHccXiQmSyyOCf3nUIQ4YVS5SK%2FP23KQPCmFSxzvcUcr9AUVG45s98KDHvsDKso%2BAB9GNMq%2FDJPBFba%2FCu88tCmu6sjgmboMmqDs2O123zQUBrwHo5lkv2N0FdXJ2tS7W1eDEUPe4t%2B024ObLPAwTYSE4GPA7LmsjoK%2FQ15MkR%2BhoTV9S%2FNy87hm%2Fvq21ECASwNBJoLVmz6ePkqkwiZk6clpBlWxyp8xJCA3K%2FZX1sByOD7I6C9BeOk%2BFudlFJz5HkFoHV648C1rB4htrQSdY2kcvhYATgA62pYnBjyiR2ZLzsvZ%2Bkw7NrFwgY6nQGSJyMCk7Dya91kiGLt%2BpteRm2L8XuYcW3nGrW%2BuX7C87tK0YOKWJ9UBzOn%2BNVYAh3Z39Rrp76gSFjui4o3RdT3OjXITDnSDsnBLlzGzbgfCs3cP%2Fk28FIDjXL6oURPvQnvTTx74qSzkxPhzSF7CF9CKlwagz1OG%2FeZO6XOHO4qyAziT0tq2w7n16uoMLk5JVZyWCuKwh0in7QfMbHi&X-Amz-Signature=5f0af03d6d6d8417f7a7e6ff1010d8ae10e8e75b29c586a3cc5731fa4fa73cd0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject',
        valid: true,
        locked: false,
        autoArchive: false,
        archived: false,
        tags: [],
        created: '2025-05-22T14:43:10.000Z',
        createdBy: "Alex O'Dullboy",
        lastSent: null,
        fixSignatureScale: true,
        roles: [
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzIx',
            name: 'Tenant',
            signerIndex: 1,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzI2',
            name: 'Tenant Witness',
            signerIndex: 101,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: '2nd Tenant',
            signerIndex: 2,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzI2',
            name: '2nd Tenant Witness',
            signerIndex: 102,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: '3rd Tenant',
            signerIndex: 3,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzI2',
            name: '3rd Tenant Witness',
            signerIndex: 103,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Estate Agent',
            signerIndex: 5,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItMDY5NzZlZmU0MzI2',
            name: 'Agent Witness',
            signerIndex: 501,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Guarantor',
            signerIndex: 6,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Signer 7',
            signerIndex: 7,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Signer',
            signerIndex: 8,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Signer',
            signerIndex: 9,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Signer',
            signerIndex: 10,
          },
          {
            id: 'cm9sMTRlOTMxZDgtMzcxYi0xMWYwLTk5MzItASDA5NzZlZmU0MzI3',
            name: 'Signer',
            signerIndex: 11,
          },
        ],
        elementConnection: {
          templateElements: [
            {
              align: 'left',
              ax: 0.24873949579831933,
              ay: 0.7315914489311164,
              bx: 0.4117647058823529,
              by: 0.7612826603325415,
              elementType: 'signature',
              formElementType: 'signature',
              fieldOrder: null,
              fontName: 'arial',
              fontSize: 12,
              helpText: '',
              hideBorder: false,
              id: 'ZWxlMDkzNWU3ZWItOWIyZS00ZGYxLWEyMjgtMmY0ZDZjNjgzMzE0',
              label: '',
              labelExtra: '',
              logicAction: 0,
              logicGroup: '',
              mapTo: '',
              options: '',
              optional: false,
              page: 1,
              role: '1',
              signer: 1,
              substantive: false,
              validation: null,
              value: '',
            },
            {
              align: 'left',
              ax: 0.2929936305732484,
              ay: 0.4613484726992148,
              bx: 0.629128084354761,
              by: 0.48035084799612693,
              elementType: 'text',
              formElementType: 'text',
              fieldOrder: null,
              fontName: 'courier',
              fontSize: 10,
              helpText: '',
              hideBorder: false,
              id: 'ZWxlZjU3NmFjYWEtYjE0Yy00Y2Y4LWI2NTMtOTViN2JiMjY0ZjUz',
              label: 'Company Name',
              labelExtra: '',
              logicAction: 0,
              logicGroup: '',
              mapTo: '',
              options: '',
              optional: false,
              page: 1,
              role: '1',
              signer: 1,
              substantive: false,
              validation: 0,
              value: '',
            },
          ],
          totalCount: 2,
        },
      };

      componentInstance.addEventListener('selectFields', customEvent => {
        console.log(customEvent.detail, 'selectFields');
        const properties = document.querySelector('ls-field-properties');
        properties.dataItem = customEvent.detail;
      });

      componentInstance.addEventListener('update', customEvent => {
        console.log(customEvent.detail, 'index update');
      });

      componentInstance.addEventListener('mutate', customEvent => {
        console.log(customEvent.detail, 'editor mutate');
        const properties = document.querySelector('ls-field-properties');
        if (customEvent?.detail) properties.dataItem = customEvent.detail.map(c => c.data);
      });

      properties.addEventListener('mutate', customEvent => {
        console.log(customEvent.detail, 'api call');
      });
    </script>
  </body>
</html>
